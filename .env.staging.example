# Staging template
# Use only sanitized data and sandboxed email mode.

NEXT_PUBLIC_APP_ENV=staging
NEXT_PUBLIC_SITE_URL=https://fc-staging.example.com

# IMPORTANT: DATABASE_URL must include ?pgbouncer=true when using Supabase's connection
# pooler (port 6543). Without it, Prisma uses named prepared statements which conflict
# when PgBouncer reuses connections — causes "prepared statement already exists" (42P05).
# IMPORTANT: Username must be postgres.[project-ref] — copy from Supabase Dashboard > Settings > Database > Transaction mode.
DATABASE_URL=postgresql://postgres.[project-ref]:[REDACTED]@aws-0-us-east-1.pooler.supabase.com:6543/postgres?pgbouncer=true
DIRECT_URL=postgresql://postgres:[REDACTED]@db.uboonaypnyuqcvqzyecm.supabase.co:5432/postgres
NEXT_PUBLIC_SUPABASE_URL=https://uboonaypnyuqcvqzyecm.supabase.co
NEXT_PUBLIC_SUPABASE_ANON_KEY=[REDACTED]
SUPABASE_SERVICE_ROLE_KEY=[REDACTED]

AUTH_SECRET=[STAGING_UNIQUE_SECRET]
MAGIC_LINK_TTL_MINUTES=30

RESEND_API_KEY=[STAGING_RESTRICTED_KEY]
EMAIL_FROM=coaching-staging@coachinginnovationlab.com
EMAIL_MODE=sandbox
EMAIL_ALLOWLIST=amit@example.com,tim@example.com
EMAIL_OUTBOUND_ENABLED=false

NUDGE_CRON_ENABLED=false
CRON_SECRET=[STAGING_UNIQUE_SECRET]
LOG_REDACTION_ENABLED=true

# Enable test helpers in staging only.
TEST_ENDPOINTS_ENABLED=true
TEST_ENDPOINTS_SECRET=[STAGING_UNIQUE_SECRET]
